{"type":"getPostByPath","data":{"title":"[note] è§£æ±º fstatat canonical snap ç›®éŒ„ï¼šæ¬Šé™è¢«æ‹’","date":"2025-03-26T16:00:00.000Z","description":"<blockquote>\n<p>è¨»è¨˜ï¼šæ­¤é ç‚ºç”± AIï¼ˆgpt-5-mini-2025-08-07ï¼‰è‡ªå‹•ç¿»è­¯è‡ªè‹±æ–‡åŸæ–‡ï¼Œå¯èƒ½å«æœ‰å°‘é‡ä¸æº–ç¢ºä¹‹è™•ã€‚</p>\n</blockquote>\n<h1>ğŸ“Œ ä»‹ç´¹</h1>\n<p>åœ¨ Ubuntu ä¸Šä½¿ç”¨ Snap æ‡‰ç”¨ç¨‹å¼æ™‚ï¼Œæ‚¨å¯èƒ½æœƒé‡åˆ°èˆ‡ fstatat æœ‰é—œçš„ä»¤äººå›°æƒ‘çš„æ¬Šé™éŒ¯èª¤ã€‚é€™ç¯‡ç­†è¨˜è¨˜éŒ„äº†ä¸€å€‹çœŸå¯¦çš„å•é¡Œï¼Œæ¢è¨å¯èƒ½çš„åŸå› ï¼Œä¸¦åˆ†äº«å¯¦éš›æœ‰æ•ˆçš„ç°¡å–®è§£æ³•ã€‚</p>\n<blockquote>\n<p><strong>â­ æ³¨æ„</strong><br>\næœ¬æ–‡æœ€åˆåœ¨é‡åˆ°å¯¦éš›å•é¡Œæ™‚ï¼Œä¸¦åœ¨ ChatGPT å”åŠ©ä¸‹è‰æ“¬ã€‚æˆ‘å·²é©—è­‰è§£æ±ºæ–¹æ¡ˆä¸¦ä¿®è¨‚å…§å®¹ï¼Œä»¥ç¢ºä¿å°é‡åˆ°ç›¸ä¼¼å•é¡Œçš„äººä¾†èªªæº–ç¢ºä¸”æ¸…æ¥šã€‚</p>\n</blockquote>","categories":[],"tags":[{"name":"snap","_id":"cmfzuvdd70030n13ihifu822s"},{"name":"permission denied","_id":"cmfzuvdd90035n13icz763z9s"}],"content":"<blockquote>\n<p>è¨»è¨˜ï¼šæ­¤é ç‚ºç”± AIï¼ˆgpt-5-mini-2025-08-07ï¼‰è‡ªå‹•ç¿»è­¯è‡ªè‹±æ–‡åŸæ–‡ï¼Œå¯èƒ½å«æœ‰å°‘é‡ä¸æº–ç¢ºä¹‹è™•ã€‚</p>\n</blockquote>\n<h1>ğŸ“Œ ä»‹ç´¹</h1>\n<p>åœ¨ Ubuntu ä¸Šä½¿ç”¨ Snap æ‡‰ç”¨ç¨‹å¼æ™‚ï¼Œæ‚¨å¯èƒ½æœƒé‡åˆ°èˆ‡ fstatat æœ‰é—œçš„ä»¤äººå›°æƒ‘çš„æ¬Šé™éŒ¯èª¤ã€‚é€™ç¯‡ç­†è¨˜è¨˜éŒ„äº†ä¸€å€‹çœŸå¯¦çš„å•é¡Œï¼Œæ¢è¨å¯èƒ½çš„åŸå› ï¼Œä¸¦åˆ†äº«å¯¦éš›æœ‰æ•ˆçš„ç°¡å–®è§£æ³•ã€‚</p>\n<blockquote>\n<p><strong>â­ æ³¨æ„</strong><br>\næœ¬æ–‡æœ€åˆåœ¨é‡åˆ°å¯¦éš›å•é¡Œæ™‚ï¼Œä¸¦åœ¨ ChatGPT å”åŠ©ä¸‹è‰æ“¬ã€‚æˆ‘å·²é©—è­‰è§£æ±ºæ–¹æ¡ˆä¸¦ä¿®è¨‚å…§å®¹ï¼Œä»¥ç¢ºä¿å°é‡åˆ°ç›¸ä¼¼å•é¡Œçš„äººä¾†èªªæº–ç¢ºä¸”æ¸…æ¥šã€‚</p>\n</blockquote>\n<span id=\"more\"></span>\n<h1>ğŸ“š å‰ç½®æ¢ä»¶</h1>\n<ul>\n<li>AppArmor</li>\n<li>LDAP (Lightweight Directory Access Protocol)</li>\n<li>fstatat</li>\n<li>snap</li>\n</ul>\n<p>ä»¥ä¸‹æ˜¯æœ¬æ–‡æåŠçš„ä¸€äº›é—œéµæ¦‚å¿µï¼š</p>\n<table>\n<thead>\n<tr>\n<th>è¡“èª</th>\n<th>ä¸­æ–‡èªªæ˜</th>\n<th>è‹±æ–‡èªªæ˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>AppArmor</strong></td>\n<td>Ubuntu çš„ä¸€ç¨®å®‰å…¨æ¨¡çµ„ï¼Œç”¨ä¾†é™åˆ¶æ‡‰ç”¨ç¨‹å¼èƒ½å­˜å–çš„è³‡æºï¼Œä¾‹å¦‚æª”æ¡ˆã€ç¶²è·¯ã€‚</td>\n<td>Ubuntu çš„å®‰å…¨æ¨¡çµ„ï¼Œç”¨ä¾†é™åˆ¶æ‡‰ç”¨ç¨‹å¼å¯ä»¥å­˜å–çš„è³‡æºã€‚</td>\n</tr>\n<tr>\n<td><strong>LDAP (Lightweight Directory Access Protocol)</strong></td>\n<td>ä¸€ç¨®å¸¸è¦‹çš„ç”¨æˆ¶é©—è­‰å”å®šï¼Œå¸¸ç”¨æ–¼ä¼æ¥­ç’°å¢ƒé›†ä¸­ç®¡ç†å¸³è™Ÿã€‚</td>\n<td>ä¸€ç¨®å¸¸è¦‹çš„ç”¨æˆ¶é©—è­‰å”å®šï¼Œå¸¸ç”¨æ–¼ä¼æ¥­ç’°å¢ƒä¸­çš„é›†ä¸­å¼å¸³è™Ÿç®¡ç†ã€‚</td>\n</tr>\n<tr>\n<td><strong>fstatat</strong></td>\n<td>ä¸€å€‹ Linux ç³»çµ±å‘¼å«ï¼Œç”¨ä¾†æŸ¥è©¢æª”æ¡ˆè³‡è¨Šã€‚é€™å€‹éŒ¯èª¤å°±æ˜¯å› ç‚ºå®ƒå¤±æ•—äº†ã€‚</td>\n<td>ä¸€å€‹ç”¨æ–¼å–å¾—æª”æ¡ˆè³‡è¨Šçš„ Linux ç³»çµ±å‘¼å«ã€‚ç•¶æ­¤å‘¼å«å¤±æ•—æ™‚æœƒç”¢ç”ŸéŒ¯èª¤ã€‚</td>\n</tr>\n<tr>\n<td><strong>Snap</strong></td>\n<td>Ubuntu æ¨å‡ºçš„å¥—ä»¶ç³»çµ±ï¼Œè®“æ‡‰ç”¨ç¨‹å¼æ›´å®¹æ˜“å®‰è£ã€å‡ç´šèˆ‡éš”é›¢ç®¡ç†ã€‚</td>\n<td>Ubuntu çš„å¥—ä»¶ç³»çµ±ï¼Œè®“æ‡‰ç”¨ç¨‹å¼æ›´å®¹æ˜“å®‰è£ã€æ›´æ–°ï¼Œä¸¦åœ¨æ²™ç›’ä¸­åŸ·è¡Œã€‚</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><strong>éæ¨™æº–å®¶ç›®éŒ„</strong>ï¼šä½¿ç”¨è€…çš„å®¶ç›®éŒ„ä½æ–¼é è¨­ <code>/home/username</code> è·¯å¾‘ä¹‹å¤–ï¼Œé€šå¸¸ä½æ–¼ä¸åŒçš„ç£ç¢Ÿæˆ–æ›è¼‰é»ä¸Š</li>\n<li><strong>å®¶ç›®éŒ„ç‚ºç¬¦è™Ÿé€£çµ</strong>ï¼šå®¶ç›®éŒ„çœ‹èµ·ä¾†åœ¨ <code>/home/username</code>ï¼Œä½†å¯¦éš›ä¸Šæ˜¯æŒ‡å‘å…¶ä»–ä½ç½®çš„ç¬¦è™Ÿé€£çµ</li>\n</ul>\n<h1>ğŸ§­ å•é¡Œè§£æ±ºæ¡†æ¶</h1>\n<h2 id=\"å•é¡Œ\">å•é¡Œ</h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cannot fstatat canonical snap directory: Permission denied</span><br></pre></td></tr></table></figure>\n<h2 id=\"æ ¹æœ¬åŸå› åˆ†æ\">æ ¹æœ¬åŸå› åˆ†æ</h2>\n<p>ä¸€èˆ¬è€Œè¨€ï¼Œæ­¤å•é¡Œå¸¸è¦‹æœ‰å…©å€‹åŸå› ï¼š</p>\n<ol>\n<li>ç³»çµ±å®‰è£åœ¨ NTFS åˆ†å‰²å€ã€‚</li>\n<li>å®¶ç›®éŒ„è¢«ç¬¦è™Ÿé€£çµåˆ°éæ¨™æº–ä½ç½®ã€‚</li>\n</ol>\n<h3 id=\"æª¢æŸ¥æª”æ¡ˆç³»çµ±é¡å‹\">æª¢æŸ¥æª”æ¡ˆç³»çµ±é¡å‹</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">df -T /</span><br><span class=\"line\"></span><br><span class=\"line\">Filesystem     Type 1K-blocks     Used Available Use% Mounted on</span><br><span class=\"line\">/dev/nvme0n1p4 ext4 669754920 44435324 591224492   7% /</span><br></pre></td></tr></table></figure>\n<p>ç³»çµ±å®‰è£åœ¨ ext4 åˆ†å‰²å€</p>\n<h3 id=\"æª¢æŸ¥æ˜¯å¦æœ‰ç¬¦è™Ÿé€£çµ\">æª¢æŸ¥æ˜¯å¦æœ‰ç¬¦è™Ÿé€£çµ</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ls -l /home/hsiangjenli/Documents/github</span><br><span class=\"line\"></span><br><span class=\"line\">drwxrwxr-x 10 hsiangjenli hsiangjenli 4096  ä¸€  27 17:05 blog</span><br><span class=\"line\">drwxrwxr-x 11 hsiangjenli hsiangjenli 4096  ä¸‰  28 17:03 default-of-credit-card-clients-mlops</span><br><span class=\"line\">drwxrwxr-x  8 hsiangjenli hsiangjenli 4096  ä¸€  29 16:40 hsiangjenli.github.io</span><br><span class=\"line\">drwxrwxr-x  5 hsiangjenli hsiangjenli 4096  ä¸‰  27 14:28 java-from-python</span><br><span class=\"line\">drwxrwxr-x  4 hsiangjenli hsiangjenli 4096  ä¸€  29 17:19 pic-bed</span><br><span class=\"line\">drwxrwxr-x 11 hsiangjenli hsiangjenli 4096  äºŒ  16 08:44 python-package-template</span><br><span class=\"line\">drwxrwxr-x  6 hsiangjenli hsiangjenli 4096  ä¸€  27 17:25 star-to-review</span><br></pre></td></tr></table></figure>\n<p>é€™äº›è³‡æ–™å¤¾éƒ½ä¸æ˜¯ç¬¦è™Ÿé€£çµ</p>\n<h2 id=\"ç‚ºä»€éº¼æœƒç™¼ç”Ÿ\">ç‚ºä»€éº¼æœƒç™¼ç”Ÿ</h2>\n<p>æˆ‘ä¹Ÿä¸çŸ¥é“ â€¦</p>\n<h2 id=\"è§£æ±ºæ–¹æ¡ˆ\">è§£æ±ºæ–¹æ¡ˆ</h2>\n<p>ä»¤äººé©šè¨çš„æ˜¯ï¼ŒåŸ·è¡Œä¸‹åˆ—æŒ‡ä»¤è§£æ±ºäº†å•é¡Œï¼š</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo dpkg-reconfigure apparmor</span><br></pre></td></tr></table></figure>\n<p>è¼¸å…¥æ‚¨æƒ³ä½¿ç”¨çš„ç›®æ¨™ç›®éŒ„è·¯å¾‘</p>\n<p><img src=\"https://hackmd.io/_uploads/Bk5RTUG6Jg.png\" alt=\"image\"></p>\n<p>é‡æ–°å•Ÿå‹•é›»è…¦~~</p>\n<h1>ğŸ” é‡é»å›é¡§</h1>\n<ul>\n<li>âœ… éŒ¯èª¤ <code>cannot fstatat canonical snap directory: Permission denied</code> é€šå¸¸èˆ‡ AppArmor çš„é™åˆ¶æœ‰é—œ</li>\n<li>âœ… å¸¸è¦‹åŸå› åŒ…æ‹¬ï¼š\n<ul>\n<li>ç³»çµ±æˆ–å®¶ç›®éŒ„ä½¿ç”¨ NTFS åˆ†å‰²å€</li>\n<li>å®¶ç›®éŒ„ç‚ºç¬¦è™Ÿé€£çµæˆ–ä½æ–¼éæ¨™æº–ä½ç½®</li>\n</ul>\n</li>\n<li>ğŸ” åœ¨æœ¬ä¾‹ä¸­ï¼š\n<ul>\n<li>ç³»çµ±åœ¨ ext4 åˆ†å‰²å€ â€” âœ… ä¸æ˜¯ NTFSã€‚</li>\n<li>å®¶ç›®éŒ„ä¸æ˜¯ç¬¦è™Ÿé€£çµ â€” âœ… ä¸æ˜¯ç¬¦è™Ÿé€£çµã€‚</li>\n</ul>\n</li>\n<li>âš ï¸ æ ¹æœ¬åŸå› ä»ä¸æ˜</li>\n<li>ğŸ›  å•é¡Œé€éä¸‹åˆ—æ–¹å¼è§£æ±ºï¼š\n<ol>\n<li>åŸ·è¡Œ <code>sudo dpkg-reconfigure apparmor</code></li>\n<li>åœ¨è¨­å®šéç¨‹ä¸­è¼¸å…¥å®¶ç›®éŒ„çš„å¯¦éš›è·¯å¾‘</li>\n<li>é‡æ–°å•Ÿå‹•ç³»çµ±</li>\n</ol>\n</li>\n</ul>\n<h1>ğŸ”— åƒè€ƒè³‡æ–™</h1>\n<ul>\n<li><a href=\"https://askubuntu.com/questions/1108780/permission-denied-when-running-snap-applications-on-ubuntu-16-04-as-a-ldap-use\">åœ¨ Ubuntu 16.04 ä»¥ LDAP ä½¿ç”¨è€…åŸ·è¡Œ snap æ‡‰ç”¨ç¨‹å¼æ™‚å‡ºç¾ â€˜Permission deniedâ€™</a></li>\n<li><a href=\"https://askubuntu.com/a/1156839/912790\">åŸ·è¡Œä»¥ snap å¥—ä»¶å®‰è£çš„æ‡‰ç”¨ç¨‹å¼æ™‚å‡ºç¾ Permission denied éŒ¯èª¤ - Ubuntu 17.04</a></li>\n</ul>\n","_path":"note-solving-fstatat-canonical-snap-directory-permission-denied.zh-TW/","_link":"https://hsiangjenli.github.io/blog/note-solving-fstatat-canonical-snap-directory-permission-denied.zh-TW/","_id":"cmfzuvdcl000xn13ie98p6n6w"}}