{"type":"getPostByPath","data":{"title":"[tutorial] Send Email with Mailgun + Python","date":"2025-03-07T16:00:00.000Z","description":"<h1>üìå Introduction</h1>\n<p>This tutorial explains how to send emails using Mailgun and Python. You will learn how to set up Mailgun, generate an API key, and write Python code to send emails with or without attachments.</p>","categories":[],"tags":[{"name":"python","_id":"cmfj240x2001kpw2bhaq0e71c"},{"name":"mailgun","_id":"cmfj240x7002ipw2b866efo9u"}],"content":"<h1>üìå Introduction</h1>\n<p>This tutorial explains how to send emails using Mailgun and Python. You will learn how to set up Mailgun, generate an API key, and write Python code to send emails with or without attachments.</p>\n<span id=\"more\"></span>\n<h1>üöÄ Quick Start</h1>\n<h2 id=\"Mailgun\">Mailgun</h2>\n<ul>\n<li>Mailgun offers a free plan, allowing up to 100 emails per day.</li>\n</ul>\n<p>Here are the three things you need to do</p>\n<ol>\n<li>Generate a Mailgun API key</li>\n<li>Note your Mailgun domain name (used for sending emails)</li>\n<li>Add your email to Mailgun (Mailgun only allows sending to authorized recipients)</li>\n</ol>\n<p><img src=\"https://hackmd.io/_uploads/Hk6SuIujkg.png\" alt=\"image\"></p>\n<!-- ![image](https://hackmd.io/_uploads/HkFMY8_syx.png) -->\n<h3 id=\"Create-an-API-key\">Create an API key</h3>\n<p><img src=\"https://hackmd.io/_uploads/ByhJkmFj1g.png\" alt=\"image\"><br>\n<img src=\"https://hackmd.io/_uploads/ry8XkmFikl.png\" alt=\"image\"><br>\n<img src=\"https://hackmd.io/_uploads/BJOHy7Fjkg.png\" alt=\"image\"></p>\n<h3 id=\"Obtain-your-Mailgun-domain\">Obtain your Mailgun domain</h3>\n<p><img src=\"https://hackmd.io/_uploads/SkoMbQtsyg.png\" alt=\"image\"></p>\n<h3 id=\"Set-up-and-verify-your-email\">Set up and verify your email</h3>\n<ol>\n<li>Add your email to Mailgun</li>\n<li>Check your mailbox to complete verification</li>\n</ol>\n<p><img src=\"https://hackmd.io/_uploads/S14QdQtoke.png\" alt=\"image\"><br>\n<img src=\"https://hackmd.io/_uploads/HkU8_Qtj1g.png\" alt=\"image\"><br>\n<img src=\"https://hackmd.io/_uploads/Sko__7tjkg.png\" alt=\"image\"><br>\n<img src=\"https://hackmd.io/_uploads/Hkggi7Kikx.png\" alt=\"image\"></p>\n<h2 id=\"Python\">Python</h2>\n<p>To see the entire code : <a href=\"https://github.com/hsiangjenli/tiny-colab/blob/f62b74143bc029935914b28652b314bfa9512e5d/mailgun/demo.py\">mailgun/demo.py</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MAILGUN_API_KEY = os.getenv(<span class=\"string\">&quot;MAILGUN_API_KEY&quot;</span>)</span><br><span class=\"line\">MAILGUN_DOMAIN_NAME = os.getenv(<span class=\"string\">&quot;MAILGUN_DOMAIN_NAME&quot;</span>)</span><br><span class=\"line\">MAILGUN_API_URL = (</span><br><span class=\"line\">    <span class=\"string\">f&quot;https://api.mailgun.net/v3/<span class=\"subst\">&#123;MAILGUN_DOMAIN_NAME&#125;</span>.mailgun.org/messages&quot;</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@error_handler_for_send_email</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">send_email</span>(<span class=\"params\">from_email: <span class=\"built_in\">str</span>, to_email: <span class=\"type\">Union</span>[<span class=\"built_in\">str</span>, <span class=\"built_in\">list</span>], subject: <span class=\"built_in\">str</span>, text: <span class=\"built_in\">str</span></span>):</span><br><span class=\"line\">    <span class=\"comment\"># Define the email parameters</span></span><br><span class=\"line\">    email_data = &#123;<span class=\"string\">&quot;from&quot;</span>: from_email, <span class=\"string\">&quot;to&quot;</span>: to_email, <span class=\"string\">&quot;subject&quot;</span>: subject, <span class=\"string\">&quot;text&quot;</span>: text&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Send the email</span></span><br><span class=\"line\">    r = requests.post(</span><br><span class=\"line\">        url=MAILGUN_API_URL, auth=(<span class=\"string\">&quot;api&quot;</span>, MAILGUN_API_KEY), data=email_data</span><br><span class=\"line\">    )</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> r</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@error_handler_for_send_email</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">send_email_with_attachment</span>(<span class=\"params\"></span></span><br><span class=\"line\"><span class=\"params\">    from_email: <span class=\"built_in\">str</span>,</span></span><br><span class=\"line\"><span class=\"params\">    to_email: <span class=\"type\">Union</span>[<span class=\"built_in\">str</span>, <span class=\"built_in\">list</span>],</span></span><br><span class=\"line\"><span class=\"params\">    subject: <span class=\"built_in\">str</span>,</span></span><br><span class=\"line\"><span class=\"params\">    text: <span class=\"built_in\">str</span>,</span></span><br><span class=\"line\"><span class=\"params\">    attachment_paths: <span class=\"built_in\">list</span>,</span></span><br><span class=\"line\"><span class=\"params\"></span>):</span><br><span class=\"line\">    <span class=\"comment\"># Define the email parameters</span></span><br><span class=\"line\">    email_data = &#123;<span class=\"string\">&quot;from&quot;</span>: from_email, <span class=\"string\">&quot;to&quot;</span>: to_email, <span class=\"string\">&quot;subject&quot;</span>: subject, <span class=\"string\">&quot;text&quot;</span>: text&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Read the attachment</span></span><br><span class=\"line\">    files = [</span><br><span class=\"line\">        (<span class=\"string\">&quot;attachment&quot;</span>, <span class=\"built_in\">open</span>(attachment_path, <span class=\"string\">&quot;rb&quot;</span>))</span><br><span class=\"line\">        <span class=\"keyword\">for</span> attachment_path <span class=\"keyword\">in</span> attachment_paths</span><br><span class=\"line\">    ]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Send the email</span></span><br><span class=\"line\">    r = requests.post(</span><br><span class=\"line\">        url=MAILGUN_API_URL, auth=(<span class=\"string\">&quot;api&quot;</span>, MAILGUN_API_KEY), data=email_data, files=files</span><br><span class=\"line\">    )</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> r</span><br></pre></td></tr></table></figure>\n<h2 id=\"Gmail\">Gmail</h2>\n<p>After sending mail from Mailgun, you can check the inbox. The message may be marked as spam; please check the spam folder for the email.</p>\n<p><img src=\"https://hackmd.io/_uploads/BJtOYQtoyl.png\" alt=\"image\"></p>\n<h1>üîÅ Key takeaways</h1>\n<ul>\n<li>Mailgun setup: generate an API key, obtain your domain name, and verify your email</li>\n<li>Python integration: use the Mailgun API and Python to programmatically send emails</li>\n<li>Sending attachments: learn how to use the Mailgun API to send emails with attachments</li>\n</ul>\n<h1>üîó References</h1>\n<ul>\n<li><a href=\"https://www.mailgun.com/blog/it-and-engineering/send-email-using-python/\">https://www.mailgun.com/blog/it-and-engineering/send-email-using-python/</a></li>\n<li><a href=\"https://stackoverflow.com/questions/53861582/sent-email-via-python-using-mailgun-api\">https://stackoverflow.com/questions/53861582/sent-email-via-python-using-mailgun-api</a></li>\n</ul>\n","_path":"tutorial_mailgun_python/","_link":"https://hsiangjenli.github.io/blog/tutorial_mailgun_python/","_id":"cmfj240wy0016pw2b1eze9sr4"}}