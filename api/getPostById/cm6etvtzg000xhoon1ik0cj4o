{"type":"getPostById","data":{"title":"[tutorial] PEX Unpacked: Building and Executing Python Executables with Ease","date":"2024-08-15T00:00:00.000Z","description":"<h2 id=\"What-is-“PEX”\"><a href=\"#What-is-“PEX”\" class=\"headerlink\" title=\"What is “PEX”?\"></a>What is “PEX”?</h2><p>The full name of PEX is Python Executable. This is an open-source tool for building a virtual environment to execute your Python code. However, be cautious when using PEX because it does not include a Python interpreter; thus, your computer must have a Python environment installed.</p>","categories":[],"tags":[{"name":"python","_id":"cm6etvtz50007hoonegm8fhpq"}],"content":"<h2 id=\"What-is-“PEX”\"><a href=\"#What-is-“PEX”\" class=\"headerlink\" title=\"What is “PEX”?\"></a>What is “PEX”?</h2><p>The full name of PEX is Python Executable. This is an open-source tool for building a virtual environment to execute your Python code. However, be cautious when using PEX because it does not include a Python interpreter; thus, your computer must have a Python environment installed.</p>\n<span id=\"more\"></span>\n\n<!-- The full name of PEX is Python Executable. This is an open-source tool for building a virtual environment to execute your Python code. However, be cautious when using PEX because it does not include a Python interpreter. Therefore, your computer must have a Python environment installed. -->\n\n<!-- PEX, which stands for Python Executable, is an open-source tool that packages Python projects into executable files. It simplifies the process of creating a virtual environment and running Python code within that isolated environment. -->\n\n<h3 id=\"The-process-of-executing-pex\"><a href=\"#The-process-of-executing-pex\" class=\"headerlink\" title=\"The process of executing .pex\"></a>The process of executing <code>.pex</code></h3><p>When you run a <code>.pex</code> file, the system reads the shebang line at the top of the file, <code>#!/usr/bin/env python</code>, to invoke the Python interpreter to execute the script.</p>\n<!-- When you run `.pex` file, the system will reading the top of your file `#!/usr/bin/env python` to 調用 python interpretable to run python. -->\n\n<!-- When you run a .pex file, the system reads the shebang line at the top of the file, #!/usr/bin/env python, to invoke the Python interpreter to execute the script. -->\n\n<h2 id=\"Practice\"><a href=\"#Practice\" class=\"headerlink\" title=\"Practice\"></a>Practice</h2><h3 id=\"Install-PEX\"><a href=\"#Install-PEX\" class=\"headerlink\" title=\"Install PEX\"></a>Install PEX</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install pex</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Enter-Interpretable-pex-environemt\"><a href=\"#Enter-Interpretable-pex-environemt\" class=\"headerlink\" title=\"Enter Interpretable pex environemt\"></a>Enter Interpretable pex environemt</h3><p>Easy way</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Enter an interpretable Pex environment without specifying a Python version</span></span><br><span class=\"line\">pex </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Enter an interpretable Pex environment specifying a specific Python version</span></span><br><span class=\"line\">pex --python=python3<span class=\"number\">.12</span> <span class=\"comment\"># specific python version</span></span><br><span class=\"line\"></span><br><span class=\"line\">---</span><br><span class=\"line\">Pex <span class=\"number\">2.16</span><span class=\"number\">.1</span> ephemeral hermetic environment <span class=\"keyword\">with</span> no dependencies.</span><br><span class=\"line\">Exit the repl (<span class=\"built_in\">type</span> quit()) <span class=\"keyword\">and</span> run `pex -h` <span class=\"keyword\">for</span> Pex CLI <span class=\"built_in\">help</span>.</span><br><span class=\"line\">Python <span class=\"number\">3.11</span><span class=\"number\">.4</span> (main, Jul  <span class=\"number\">5</span> <span class=\"number\">2023</span>, 08:<span class=\"number\">40</span>:<span class=\"number\">20</span>) [Clang <span class=\"number\">14.0</span><span class=\"number\">.6</span> ] on darwin</span><br><span class=\"line\"><span class=\"type\">Type</span> <span class=\"string\">&quot;help&quot;</span>, <span class=\"string\">&quot;pex&quot;</span>, <span class=\"string\">&quot;copyright&quot;</span>, <span class=\"string\">&quot;credits&quot;</span> <span class=\"keyword\">or</span> <span class=\"string\">&quot;license&quot;</span> <span class=\"keyword\">for</span> more information.</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span></span><br></pre></td></tr></table></figure>\n\n<p>Advanced</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Specifying requirements</span></span><br><span class=\"line\">pex pandas</span><br><span class=\"line\"></span><br><span class=\"line\">---</span><br><span class=\"line\">Pex <span class=\"number\">2.16</span><span class=\"number\">.1</span> ephemeral hermetic environment <span class=\"keyword\">with</span> <span class=\"number\">1</span> requirement <span class=\"keyword\">and</span> <span class=\"number\">6</span> activated distributions.</span><br><span class=\"line\">Python <span class=\"number\">3.11</span><span class=\"number\">.4</span> (main, Jul  <span class=\"number\">5</span> <span class=\"number\">2023</span>, 08:<span class=\"number\">40</span>:<span class=\"number\">20</span>) [Clang <span class=\"number\">14.0</span><span class=\"number\">.6</span> ] on darwin</span><br><span class=\"line\"><span class=\"type\">Type</span> <span class=\"string\">&quot;help&quot;</span>, <span class=\"string\">&quot;pex&quot;</span>, <span class=\"string\">&quot;copyright&quot;</span>, <span class=\"string\">&quot;credits&quot;</span> <span class=\"keyword\">or</span> <span class=\"string\">&quot;license&quot;</span> <span class=\"keyword\">for</span> more information.</span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Package-py-into-pex-file\"><a href=\"#Package-py-into-pex-file\" class=\"headerlink\" title=\"Package .py into pex file\"></a>Package <code>.py</code> into pex file</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># demo.py</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> pandas <span class=\"keyword\">as</span> pd</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">main</span>():</span><br><span class=\"line\">    <span class=\"built_in\">print</span>(<span class=\"string\">f&quot;Hello, World! The pandas version is <span class=\"subst\">&#123;pd.__version__&#125;</span>&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    main()</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pex -D . -e demo:main -o demo.pex -r requirements.txt</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Execute PEX script</span></span><br><span class=\"line\">./demo.pex</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">&gt;&gt;&gt; </span>Hello, World! The pandas version <span class=\"keyword\">is</span> <span class=\"number\">2.2</span><span class=\"number\">.2</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>-D</code>: Source directory</li>\n<li><code>-e</code>: Entry point for the PEX application</li>\n<li><code>-o</code>: Output file name for the PEX file</li>\n<li><code>-r</code>: Specifies requirements file that lists the dependencies</li>\n</ul>\n<h2 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h2><ul>\n<li><a href=\"https://blog.csdn.net/gitblog_00001/article/details/138744439\">探索PEX：高效且可移植的Python环境解决方案</a></li>\n<li><a href=\"https://docs.pex-tool.org/buildingpex.html#specifying-entry-points\">Specifying entry points</a></li>\n</ul>\n","_path":"tutorial_pex_unpacked/","_link":"https://hsiangjenli.github.io/blog/tutorial_pex_unpacked/","_id":"cm6etvtzg000xhoon1ik0cj4o"}}