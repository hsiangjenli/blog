{"type":"getPostById","data":{"title":"[教學] 使用 Mailgun + Python 發送電子郵件","date":"2025-03-07T16:00:00.000Z","description":"<blockquote>\n<p>註記：此頁為由 AI（gpt-5-mini-2025-08-07）自動翻譯自英文原文，可能含有少量不準確之處。</p>\n</blockquote>\n<h1>📌 介紹</h1>\n<p>本教學說明如何使用 Mailgun 與 Python 發送電子郵件。你將學會如何設定 Mailgun、產生 API 金鑰，以及撰寫 Python 程式碼來發送有或無附件的電子郵件。</p>","categories":[],"tags":[{"name":"python","_id":"cmfy3ewfb001emr2bhveq7jne"},{"name":"mailgun","_id":"cmfy3ewg1004umr2bfm4wd6jj"}],"content":"<blockquote>\n<p>註記：此頁為由 AI（gpt-5-mini-2025-08-07）自動翻譯自英文原文，可能含有少量不準確之處。</p>\n</blockquote>\n<h1>📌 介紹</h1>\n<p>本教學說明如何使用 Mailgun 與 Python 發送電子郵件。你將學會如何設定 Mailgun、產生 API 金鑰，以及撰寫 Python 程式碼來發送有或無附件的電子郵件。</p>\n<span id=\"more\"></span>\n<h1>🚀 快速開始</h1>\n<h2 id=\"Mailgun\">Mailgun</h2>\n<ul>\n<li>Mailgun 提供免費方案，允許每天最多發送 100 封電子郵件。</li>\n</ul>\n<p>以下是三件你需要做的事</p>\n<ol>\n<li>產生 Mailgun API 金鑰</li>\n<li>記住你的 Mailgun 網域名稱（用於發送電子郵件）</li>\n<li>將你的電子郵件加入 Mailgun（Mailgun 只允許發送郵件給已授權的收件人）</li>\n</ol>\n<p><img src=\"https://hackmd.io/_uploads/Hk6SuIujkg.png\" alt=\"image\"></p>\n<!-- ![image](https://hackmd.io/_uploads/HkFMY8_syx.png) -->\n<h3 id=\"建立-API-金鑰\">建立 API 金鑰</h3>\n<p><img src=\"https://hackmd.io/_uploads/ByhJkmFj1g.png\" alt=\"image\"><br>\n<img src=\"https://hackmd.io/_uploads/ry8XkmFikl.png\" alt=\"image\"><br>\n<img src=\"https://hackmd.io/_uploads/BJOHy7Fjkg.png\" alt=\"image\"></p>\n<h3 id=\"從-Mailgun-取得你的網域\">從 Mailgun 取得你的網域</h3>\n<p><img src=\"https://hackmd.io/_uploads/SkoMbQtsyg.png\" alt=\"image\"></p>\n<h3 id=\"設定你的電子郵件並進行驗證\">設定你的電子郵件並進行驗證</h3>\n<ol>\n<li>將你的電子郵件加入 Mailgun</li>\n<li>檢查信箱以完成驗證</li>\n</ol>\n<p><img src=\"https://hackmd.io/_uploads/S14QdQtoke.png\" alt=\"image\"><br>\n<img src=\"https://hackmd.io/_uploads/HkU8_Qtj1g.png\" alt=\"image\"><br>\n<img src=\"https://hackmd.io/_uploads/Sko__7tjkg.png\" alt=\"image\"><br>\n<img src=\"https://hackmd.io/_uploads/Hkggi7Kikx.png\" alt=\"image\"></p>\n<h2 id=\"Python\">Python</h2>\n<p>完整程式碼請見： <a href=\"https://github.com/hsiangjenli/tiny-colab/blob/f62b74143bc029935914b28652b314bfa9512e5d/mailgun/demo.py\">mailgun/demo.py</a></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">MAILGUN_API_KEY = os.getenv(<span class=\"string\">&quot;MAILGUN_API_KEY&quot;</span>)</span><br><span class=\"line\">MAILGUN_DOMAIN_NAME = os.getenv(<span class=\"string\">&quot;MAILGUN_DOMAIN_NAME&quot;</span>)</span><br><span class=\"line\">MAILGUN_API_URL = (</span><br><span class=\"line\">    <span class=\"string\">f&quot;https://api.mailgun.net/v3/<span class=\"subst\">&#123;MAILGUN_DOMAIN_NAME&#125;</span>.mailgun.org/messages&quot;</span></span><br><span class=\"line\">)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@error_handler_for_send_email</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">send_email</span>(<span class=\"params\">from_email: <span class=\"built_in\">str</span>, to_email: <span class=\"type\">Union</span>[<span class=\"built_in\">str</span>, <span class=\"built_in\">list</span>], subject: <span class=\"built_in\">str</span>, text: <span class=\"built_in\">str</span></span>):</span><br><span class=\"line\">    <span class=\"comment\"># Define the email parameters</span></span><br><span class=\"line\">    email_data = &#123;<span class=\"string\">&quot;from&quot;</span>: from_email, <span class=\"string\">&quot;to&quot;</span>: to_email, <span class=\"string\">&quot;subject&quot;</span>: subject, <span class=\"string\">&quot;text&quot;</span>: text&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Send the email</span></span><br><span class=\"line\">    r = requests.post(</span><br><span class=\"line\">        url=MAILGUN_API_URL, auth=(<span class=\"string\">&quot;api&quot;</span>, MAILGUN_API_KEY), data=email_data</span><br><span class=\"line\">    )</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> r</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@error_handler_for_send_email</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">send_email_with_attachment</span>(<span class=\"params\"></span></span><br><span class=\"line\"><span class=\"params\">    from_email: <span class=\"built_in\">str</span>,</span></span><br><span class=\"line\"><span class=\"params\">    to_email: <span class=\"type\">Union</span>[<span class=\"built_in\">str</span>, <span class=\"built_in\">list</span>],</span></span><br><span class=\"line\"><span class=\"params\">    subject: <span class=\"built_in\">str</span>,</span></span><br><span class=\"line\"><span class=\"params\">    text: <span class=\"built_in\">str</span>,</span></span><br><span class=\"line\"><span class=\"params\">    attachment_paths: <span class=\"built_in\">list</span>,</span></span><br><span class=\"line\"><span class=\"params\"></span>):</span><br><span class=\"line\">    <span class=\"comment\"># Define the email parameters</span></span><br><span class=\"line\">    email_data = &#123;<span class=\"string\">&quot;from&quot;</span>: from_email, <span class=\"string\">&quot;to&quot;</span>: to_email, <span class=\"string\">&quot;subject&quot;</span>: subject, <span class=\"string\">&quot;text&quot;</span>: text&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Read the attachment</span></span><br><span class=\"line\">    files = [</span><br><span class=\"line\">        (<span class=\"string\">&quot;attachment&quot;</span>, <span class=\"built_in\">open</span>(attachment_path, <span class=\"string\">&quot;rb&quot;</span>))</span><br><span class=\"line\">        <span class=\"keyword\">for</span> attachment_path <span class=\"keyword\">in</span> attachment_paths</span><br><span class=\"line\">    ]</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># Send the email</span></span><br><span class=\"line\">    r = requests.post(</span><br><span class=\"line\">        url=MAILGUN_API_URL, auth=(<span class=\"string\">&quot;api&quot;</span>, MAILGUN_API_KEY), data=email_data, files=files</span><br><span class=\"line\">    )</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> r</span><br></pre></td></tr></table></figure>\n<h2 id=\"Gmail\">Gmail</h2>\n<p>從 Mailgun 發送郵件後，你可以檢查收件匣。郵件可能會被標記為垃圾郵件，請檢查垃圾郵件資料夾是否有該郵件。</p>\n<p><img src=\"https://hackmd.io/_uploads/BJtOYQtoyl.png\" alt=\"image\"></p>\n<h1>🔁 小結</h1>\n<ul>\n<li>Mailgun 設定：產生 API 金鑰、取得你的網域名稱，並驗證你的電子郵件</li>\n<li>Python 整合：使用 Mailgun API 與 Python 程式化發送電子郵件</li>\n<li>附件發送：學習如何使用 Mailgun API 發送包含附件的郵件</li>\n</ul>\n<h1>🔗 參考資料</h1>\n<ul>\n<li><a href=\"https://www.mailgun.com/blog/it-and-engineering/send-email-using-python/\">https://www.mailgun.com/blog/it-and-engineering/send-email-using-python/</a></li>\n<li><a href=\"https://stackoverflow.com/questions/53861582/sent-email-via-python-using-mailgun-api\">https://stackoverflow.com/questions/53861582/sent-email-via-python-using-mailgun-api</a></li>\n</ul>\n","_path":"tutorial-using-mailgun-python-to-send-email.zh-TW/","_link":"https://hsiangjenli.github.io/blog/tutorial-using-mailgun-python-to-send-email.zh-TW/","_id":"cmfy3ewfo002smr2b29rb00vd"}}