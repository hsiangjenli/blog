{"type":"getPostById","data":{"title":"[tutorial] Creating and Running Lambda Functions with AWS SAM","date":"2025-06-19T16:00:00.000Z","description":"<blockquote>\n<p>Note: This page is an AI-generated (gpt-5-mini-2025-08-07) translation from Traditional Chinese and may contain minor inaccuracies.</p>\n<h1>📌 Introduction</h1>\n</blockquote>\n<p>This guide introduces how to use AWS SAM to create and run Lambda functions, including basic installation, an explanation of project structure, and the workflow for running Lambda locally.</p>","categories":[],"tags":[{"name":"aws","_id":"cmfj10y560048n42bcn6q2mkq"},{"name":"lambda","_id":"cmfj10y56004bn42b531k6kws"}],"content":"<blockquote>\n<p>Note: This page is an AI-generated (gpt-5-mini-2025-08-07) translation from Traditional Chinese and may contain minor inaccuracies.</p>\n<h1>📌 Introduction</h1>\n</blockquote>\n<p>This guide introduces how to use AWS SAM to create and run Lambda functions, including basic installation, an explanation of project structure, and the workflow for running Lambda locally.</p>\n<span id=\"more\"></span>\n<h1>🚀 Quick Start</h1>\n<h2 id=\"AWS-CLI\">AWS CLI</h2>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install awscli</span><br></pre></td></tr></table></figure>\n<h2 id=\"AWS-SAM-Serverless-Application-Model-CLI\">AWS SAM (Serverless Application Model) CLI</h2>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install aws-sam-cli</span><br></pre></td></tr></table></figure>\n<h3 id=\"Initialize-a-SAM-project\">Initialize a SAM project</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sam init</span><br></pre></td></tr></table></figure>\n<h3 id=\"Project-structure-overview\">Project structure overview</h3>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.</span><br><span class=\"line\">├── __init__.py</span><br><span class=\"line\">├── events</span><br><span class=\"line\">│   └── event.json</span><br><span class=\"line\">├── hello_world</span><br><span class=\"line\">│   ├── __init__.py</span><br><span class=\"line\">│   ├── app.py</span><br><span class=\"line\">│   └── requirements.txt</span><br><span class=\"line\">├── README.md</span><br><span class=\"line\">├── samconfig.toml</span><br><span class=\"line\">├── template.yaml</span><br><span class=\"line\">└── tests</span><br><span class=\"line\">    ├── __init__.py</span><br><span class=\"line\">    ├── integration</span><br><span class=\"line\">    │   ├── __init__.py</span><br><span class=\"line\">    │   └── test_api_gateway.py</span><br><span class=\"line\">    ├── requirements.txt</span><br><span class=\"line\">    └── unit</span><br><span class=\"line\">        ├── __init__.py</span><br><span class=\"line\">        └── test_handler.py</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>events/</code> - Contains mock event payload JSON files used to test the Lambda function</li>\n<li><code>hello_world/</code> - Where the application lives; Lambda-related functions including the handler (e.g., <a href=\"http://app.py\">app.py</a>) and dependencies (e.g., requirements.txt)</li>\n<li><code>tests/</code> - Unit test folder</li>\n<li><code>samconfig.toml</code> - Stores SAM CLI execution parameters (such as deployment region, stack name, S3 bucket, etc.) to simplify settings when running <code>sam deploy</code></li>\n<li><code>template.yaml</code> - Defines all Lambda functions; the main IaC file (which services are used and their dependencies). It is an extension of AWS CloudFormation syntax.</li>\n</ul>\n<h4 id=\"template-yaml\"><code>template.yaml</code></h4>\n<blockquote>\n<p>You can use the CloudFormation Linter tool <a href=\"https://github.com/aws-cloudformation/cfn-lint\"><code>cfn-lint</code></a> to detect format and property errors in the file</p>\n</blockquote>\n<p><strong>Header</strong></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">AWSTemplateFormatVersion:</span> <span class=\"string\">&#x27;2010-09-09&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">Transform:</span> <span class=\"string\">AWS::Serverless-2016-10-31</span></span><br><span class=\"line\"><span class=\"attr\">Description:</span> <span class=\"string\">&gt;</span></span><br><span class=\"line\">  <span class=\"string\">TODO....</span></span><br></pre></td></tr></table></figure>\n<ol>\n<li><strong>AWSTemplateFormatVersion</strong> - The AWS CloudFormation version</li>\n<li><strong>Transform</strong> - Tells CloudFormation to use SAM to extend the template syntax</li>\n<li><strong>Description</strong> - Project description</li>\n</ol>\n<p><strong>Content</strong></p>\n<ol>\n<li><strong>Globals</strong> - Default settings provided to Resources</li>\n<li><strong>Resources</strong> - The AWS resources to create. See <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-template-resource-type-ref.html\">AWS resource and property types reference</a> and <a href=\"https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-specification-resources-and-properties.html\">AWS SAM resources and properties</a></li>\n<li><strong>Outputs</strong> - Expected outputs after deployment (the information you need to know)</li>\n</ol>\n<h4 id=\"samconfig-toml\"><code>samconfig.toml</code></h4>\n<blockquote>\n<p>See <a href=\"https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-config.html\">AWS SAM CLI configuration file</a>, <a href=\"https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/using-sam-cli-configure.html\">Configuring the AWS SAM CLI</a>, <a href=\"https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-command-reference.html\">AWS SAM CLI command reference</a></p>\n</blockquote>\n<p>The purpose is to simplify the complexity of using sam commands</p>\n<table>\n<thead>\n<tr>\n<th>Original</th>\n<th>Optimized with <code>samconfig</code></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>sam build --cached --parallel --use-containers</code></td>\n<td><code>sam build</code></td>\n</tr>\n<tr>\n<td><code>sam local invoke --env-vars locals.json</code></td>\n<td><code>sam local invoke</code></td>\n</tr>\n<tr>\n<td><code>sam local start-api --env-vars locals.json --warm-containers EAGER</code></td>\n<td><code>sam local start-api</code></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"Local-Invoke\">Local Invoke</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sam local invoke</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">No current session found, using default AWS::AccountId                                                       </span><br><span class=\"line\">Invoking app.lambda_handler (python3.13)                                                                    </span><br><span class=\"line\">Local image is up-to-date                                                                                   </span><br><span class=\"line\">Using local image: public.ecr.aws/lambda/python:3.13-rapid-x86_64.                                           </span><br><span class=\"line\">                                                                                                            </span><br><span class=\"line\">Mounting /Users/XXXXXX/Documents/TEST/hello_world as </span><br><span class=\"line\">/var/task:ro,delegated, inside runtime container                                                            </span><br><span class=\"line\">START RequestId: f6a6ec50-58b2-432c-9381-ec45ca43b130 Version: $LATEST</span><br><span class=\"line\">END RequestId: e883464b-1216-43ae-b0fe-f7f803a73057</span><br><span class=\"line\">REPORT RequestId: e883464b-1216-43ae-b0fe-f7f803a73057  Init Duration: 1.26 ms  Duration: 381.91 ms     Billed Duration: 382 ms     Memory Size: 128 MB     Max Memory Used: 128 MB</span><br><span class=\"line\">&#123;&quot;statusCode&quot;: 200, &quot;body&quot;: &quot;&#123;\\&quot;message\\&quot;: \\&quot;hello world\\&quot;&#125;&quot;&#125;</span><br></pre></td></tr></table></figure>\n<h1>🔁 Recap</h1>\n<ul>\n<li>Installation commands</li>\n<li>Understand the AWS SAM project structure</li>\n<li>Know the purposes of the specific files <code>template.yaml</code> and <code>samconfig.toml</code> and their related official documentation</li>\n<li>Invoke a simple “Hello World” Lambda function locally</li>\n</ul>\n<h1>🔗 References</h1>\n<ul>\n<li><a href=\"https://ithelp.ithome.com.tw/articles/10214954\">Day02-環境準備(一)安裝AWS CLI、Docker、AWS SAM CLI</a></li>\n</ul>\n","_path":"tutorial-aws-sam-lambda.en/","_link":"https://hsiangjenli.github.io/blog/tutorial-aws-sam-lambda.en/","_id":"cmfj10y4r0029n42bdc06fqm5"}}