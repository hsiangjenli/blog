{"type":"getPostById","data":{"title":"[æ•™å­¸] å¦‚ä½•ä½¿ç”¨ psutil åœ¨ Python ä¸­ç›£æ§ CPU èˆ‡è¨˜æ†¶é«”ä½¿ç”¨ç‡","date":"2024-01-25T16:00:00.000Z","description":"<blockquote>\n<p>è¨»è¨˜ï¼šæ­¤é ç‚ºç”± AIï¼ˆgpt-5-mini-2025-08-07ï¼‰è‡ªå‹•ç¿»è­¯è‡ªè‹±æ–‡åŸæ–‡ï¼Œå¯èƒ½å«æœ‰å°‘é‡ä¸æº–ç¢ºä¹‹è™•ã€‚</p>\n</blockquote>\n<h1>ğŸ“Œ ä»‹ç´¹</h1>\n<p>é€™ç¯‡æ–‡ç« ä»‹ç´¹ psutilï¼Œä¸€å€‹é–‹æºçš„ Python å¥—ä»¶ï¼Œå¯æä¾›æœ‰é—œ CPUã€è¨˜æ†¶é«”ã€ç£ç¢Ÿèˆ‡ç¶²è·¯çš„ç³»çµ±è³‡è¨Šã€‚å…§å®¹æ¶µè“‹ psutil çš„å®‰è£ï¼Œä¸¦ç¤ºç¯„ç”¨æ–¼ç›£æ§ CPU èˆ‡è¨˜æ†¶é«”ä½¿ç”¨ç‡çš„å¯¦ç”¨å‡½å¼ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨è£é£¾å™¨å°‡å…¶æ•´åˆåˆ° Python ç¨‹å¼ç¢¼ä¸­ã€‚</p>","categories":[],"tags":[{"name":"python","_id":"cmm5k6uqd001vsq21422cbk6x"}],"content":"\n    <style>\n    .post-lang-switch{\n      position: absolute;\n      top: .75rem;\n      right: .75rem;\n      z-index: 2;\n      color: var(--link, #3273dc);\n    }\n    .post-lang-switch:hover{opacity:.8}\n    </style>\n  \n    <a class=\"post-lang-switch\" href=\"/blog/tutorial-how-to-use-psutil-to-monitor-cpu-and-memory-usage-in-python.en/\" title=\"View English version\" aria-label=\"View English version\">\n      <i class=\"fas fa-language\"></i>\n    </a>\n  <blockquote>\n<p>è¨»è¨˜ï¼šæ­¤é ç‚ºç”± AIï¼ˆgpt-5-mini-2025-08-07ï¼‰è‡ªå‹•ç¿»è­¯è‡ªè‹±æ–‡åŸæ–‡ï¼Œå¯èƒ½å«æœ‰å°‘é‡ä¸æº–ç¢ºä¹‹è™•ã€‚</p>\n</blockquote>\n<h1>ğŸ“Œ ä»‹ç´¹</h1>\n<p>é€™ç¯‡æ–‡ç« ä»‹ç´¹ psutilï¼Œä¸€å€‹é–‹æºçš„ Python å¥—ä»¶ï¼Œå¯æä¾›æœ‰é—œ CPUã€è¨˜æ†¶é«”ã€ç£ç¢Ÿèˆ‡ç¶²è·¯çš„ç³»çµ±è³‡è¨Šã€‚å…§å®¹æ¶µè“‹ psutil çš„å®‰è£ï¼Œä¸¦ç¤ºç¯„ç”¨æ–¼ç›£æ§ CPU èˆ‡è¨˜æ†¶é«”ä½¿ç”¨ç‡çš„å¯¦ç”¨å‡½å¼ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨è£é£¾å™¨å°‡å…¶æ•´åˆåˆ° Python ç¨‹å¼ç¢¼ä¸­ã€‚</p>\n<span id=\"more\"></span>\n<h1>ğŸš€ å¿«é€Ÿé–‹å§‹</h1>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install psutil</span><br></pre></td></tr></table></figure>\n<h2 id=\"psutil-ä¸­çš„å¯¦ç”¨å‡½å¼\">psutil ä¸­çš„å¯¦ç”¨å‡½å¼</h2>\n<h3 id=\"CPU\">CPU</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">psutil.cpu_count() <span class=\"comment\"># å–å¾— CPU æ•¸é‡</span></span><br><span class=\"line\">psutil.cpu_percent() <span class=\"comment\"># å–å¾—æ‰€æœ‰ CPU çš„ä½¿ç”¨ç‡</span></span><br><span class=\"line\">psutil.cpu_percent(percpu=<span class=\"literal\">True</span>) <span class=\"comment\"># å–å¾—æ¯é¡† CPU çš„ä½¿ç”¨ç‡</span></span><br><span class=\"line\">psutil.cpu_percent(interval=<span class=\"number\">1</span>) <span class=\"comment\"># åœ¨ 1 ç§’å…§å–å¾—æ‰€æœ‰ CPU çš„ä½¿ç”¨ç‡ï¼Œä½¿ç”¨ interval å¯å¾—åˆ°è¼ƒç©©å®šçš„çµæœ</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"è¨˜æ†¶é«”\">è¨˜æ†¶é«”</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">info = psutil.virtual_memory()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ç¸½è¨˜æ†¶é«”</span></span><br><span class=\"line\">info.total / <span class=\"number\">1024</span> / <span class=\"number\">1024</span> / <span class=\"number\">1024</span> <span class=\"comment\"># bytes -&gt; GB</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># è¨˜æ†¶é«”ä½¿ç”¨ç‡</span></span><br><span class=\"line\">info.percent</span><br></pre></td></tr></table></figure>\n<h4 id=\"MacOS\">MacOS</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># svmem(total=25769803776, available=7726628864, percent=70.0, used=9045114880, free=791134208, active=6949453824, inactive=6915768320, wired=2095661056)</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"Ubuntu\">Ubuntu</h4>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># æœƒå–å¾—æ›´å¤šè³‡è¨Šï¼Œä¾‹å¦‚ buffersã€cached ç­‰ç­‰..</span></span><br><span class=\"line\"><span class=\"comment\"># svmem(total=33541988352, available=25899790336, percent=22.8, used=7087771648, free=2703233024, active=15287881728, inactive=14264188928, buffers=965103616, cached=22785880064, shared=8265728, slab=904495104)</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"å¦‚ä½•å°‡-psutil-æ•´åˆåˆ°æˆ‘å€‘çš„ç¨‹å¼ï¼Ÿ\">å¦‚ä½•å°‡ psutil æ•´åˆåˆ°æˆ‘å€‘çš„ç¨‹å¼ï¼Ÿ</h2>\n<p>æˆ‘å€‘å¯ä»¥ä½¿ç”¨è£é£¾å™¨ä¾†ç›£æ§æ¯å€‹å‡½å¼çš„ CPU èˆ‡è¨˜æ†¶é«”ä½¿ç”¨æƒ…æ³ã€‚</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> psutil</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">monitor</span>(<span class=\"params\">func</span>):</span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">wrapper</span>(<span class=\"params\">*args, **kwargs</span>):</span><br><span class=\"line\">        process = psutil.Process()</span><br><span class=\"line\">        cur_func_pid = process.pid</span><br><span class=\"line\">        process = psutil.Process(cur_func_pid)</span><br><span class=\"line\"></span><br><span class=\"line\">        func(*args, **kwargs)</span><br><span class=\"line\"></span><br><span class=\"line\">        cpu_usage = process.cpu_percent(interval=<span class=\"number\">0.01</span>)</span><br><span class=\"line\">        memory_usage = process.memory_info().rss / <span class=\"number\">1024</span> / <span class=\"number\">1024</span> / <span class=\"number\">1024</span> <span class=\"comment\"># bytes -&gt; GB</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">f&quot;CPU usage: <span class=\"subst\">&#123;cpu_usage&#125;</span>%&quot;</span>)</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">f&quot;Memory usage: <span class=\"subst\">&#123;memory_usage&#125;</span>GB&quot;</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> wrapper</span><br></pre></td></tr></table></figure>\n<h3 id=\"ç¯„ä¾‹\">ç¯„ä¾‹</h3>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@monitor</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">example_code</span>():</span><br><span class=\"line\">    <span class=\"keyword\">import</span> numpy <span class=\"keyword\">as</span> np</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"number\">100</span>):</span><br><span class=\"line\">        np.random.rand(<span class=\"number\">100</span>, <span class=\"number\">100</span>, <span class=\"number\">100</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">example_code()</span><br></pre></td></tr></table></figure>\n<h1>ğŸ” å°çµ</h1>\n<ul>\n<li>psutil æ˜¯ä¸€å€‹ç”¨æ–¼ç³»çµ±ç›£æ§çš„é–‹æº Python å¥—ä»¶ã€‚</li>\n<li>å®ƒæä¾›å–å¾— CPU èˆ‡è¨˜æ†¶é«”ä½¿ç”¨è³‡è¨Šçš„å¯¦ç”¨å‡½å¼ã€‚</li>\n<li>ä½ å¯ä»¥ä½¿ç”¨è£é£¾å™¨è¼•é¬†åœ°ç›£æ§ Python å‡½å¼çš„ CPU èˆ‡è¨˜æ†¶é«”ä½¿ç”¨æƒ…æ³ã€‚</li>\n</ul>\n<h1>ğŸ”— åƒè€ƒè³‡æ–™</h1>\n<ul>\n<li><a href=\"https://zhuanlan.zhihu.com/p/380842937\">Pythonå¸¸ç”¨åº“ä¹‹psutilä½¿ç”¨æŒ‡å—</a></li>\n<li><a href=\"https://blog.csdn.net/qq_43391414/article/details/124431187\">ç®€å•ä»‹ç»psutilåº“ï¼ˆvirtual_memory()ã€cpu_percent()</a></li>\n<li><a href=\"https://www.askpython.com/python-modules/psutil-module\">ä½¿ç”¨ psutil æ¨¡çµ„é€²è¡Œ Python ç³»çµ±ç›£æ§èˆ‡åˆ†æ</a></li>\n<li><a href=\"https://www.geeksforgeeks.org/psutil-module-in-python/\">Python çš„ Psutil æ¨¡çµ„</a></li>\n<li><a href=\"https://docs.oracle.com/en/database/oracle/machine-learning/oml4py/2/mlpug/administrative-tasks-oracle-machine-learning-python1.html#GUID-0A8BF865-13EA-4A20-BAA9-7066066C45CB\">Oracle Machine Learning for Python çš„ç®¡ç†å·¥ä½œ</a></li>\n</ul>\n","_path":"/zh-TW/tutorial-how-to-use-psutil-to-monitor-cpu-and-memory-usage-in-python/","_link":"https://hsiangjenli.github.io/blog/zh-TW/tutorial-how-to-use-psutil-to-monitor-cpu-and-memory-usage-in-python/","_id":"cmm5k6uqp003hsq210imh54o1"}}