{"type":"getPostById","data":{"title":"[æ•™å­¸] æƒææ¨¡å‹çš„ç°¡å–®ç¯„ä¾‹","date":"2025-06-13T16:00:00.000Z","description":"<blockquote>\n<p>è¨»è¨˜ï¼šæ­¤é ç‚ºç”± AIï¼ˆgpt-5-mini-2025-08-07ï¼‰è‡ªå‹•ç¿»è­¯è‡ªè‹±æ–‡åŸæ–‡ï¼Œå¯èƒ½å«æœ‰å°‘é‡ä¸æº–ç¢ºä¹‹è™•ã€‚</p>\n</blockquote>\n<h1>ğŸ“Œ ä»‹ç´¹</h1>\n<p>æœ¬æ–‡ç¤ºç¯„å¦‚ä½•ä½¿ç”¨ä¸€å€‹ç°¡å–®çš„ç¯„ä¾‹èˆ‡ <code>modelscan</code> å·¥å…·ä¾†åµæ¸¬ä¸å®‰å…¨çš„ PyTorch æ¨¡å‹ã€‚</p>","categories":[],"tags":[{"name":"mlsecops","_id":"cmhmfy2fa0053mo23d36n42lk"}],"content":"\n    <style>\n    .post-lang-switch{\n      position: absolute;\n      top: .75rem;\n      right: .75rem;\n      z-index: 2;\n      color: var(--link, #3273dc);\n    }\n    .post-lang-switch:hover{opacity:.8}\n    </style>\n  \n    <a class=\"post-lang-switch\" href=\"/blog/tutorial-a-toy-example-of-scanning-models.en/\" title=\"View English version\" aria-label=\"View English version\">\n      <i class=\"fas fa-language\"></i>\n    </a>\n  <blockquote>\n<p>è¨»è¨˜ï¼šæ­¤é ç‚ºç”± AIï¼ˆgpt-5-mini-2025-08-07ï¼‰è‡ªå‹•ç¿»è­¯è‡ªè‹±æ–‡åŸæ–‡ï¼Œå¯èƒ½å«æœ‰å°‘é‡ä¸æº–ç¢ºä¹‹è™•ã€‚</p>\n</blockquote>\n<h1>ğŸ“Œ ä»‹ç´¹</h1>\n<p>æœ¬æ–‡ç¤ºç¯„å¦‚ä½•ä½¿ç”¨ä¸€å€‹ç°¡å–®çš„ç¯„ä¾‹èˆ‡ <code>modelscan</code> å·¥å…·ä¾†åµæ¸¬ä¸å®‰å…¨çš„ PyTorch æ¨¡å‹ã€‚</p>\n<span id=\"more\"></span>\n<h1>ğŸš€ å¿«é€Ÿé–‹å§‹</h1>\n<blockquote>\n<p>é–‹å§‹ä¹‹å‰ï¼Œæ‚¨éœ€è¦å®‰è£ä»¥ä¸‹å¥—ä»¶</p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pip install numpy torch modelscan</span><br></pre></td></tr></table></figure>\n<h2 id=\"æº–å‚™å®‰å…¨æ¨¡å‹\">æº–å‚™å®‰å…¨æ¨¡å‹</h2>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> torch <span class=\"keyword\">import</span> nn</span><br><span class=\"line\"><span class=\"keyword\">import</span> torch</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">SafeModel</span>(nn.Module):</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__init__</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"built_in\">super</span>(SafeModel, self).__init__()</span><br><span class=\"line\">        self.linear = nn.Linear(<span class=\"number\">10</span>, <span class=\"number\">1</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">forward</span>(<span class=\"params\">self, x</span>):</span><br><span class=\"line\">        <span class=\"keyword\">return</span> self.linear(x)</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    model = SafeModel()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># save the model</span></span><br><span class=\"line\">    torch.save(model.state_dict(), <span class=\"string\">&quot;safe_model.pth&quot;</span>)</span><br></pre></td></tr></table></figure>\n<h2 id=\"æº–å‚™æƒ¡æ„æ¨¡å‹\">æº–å‚™æƒ¡æ„æ¨¡å‹</h2>\n<p>é€™æ˜¯ä¸€å€‹åœ¨è¼‰å…¥æ™‚æœƒç”¢ç”Ÿè¼¸å‡ºçš„æƒ¡æ„æ¨¡å‹ã€‚</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">from</span> torch <span class=\"keyword\">import</span> nn</span><br><span class=\"line\"><span class=\"keyword\">import</span> torch</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">class</span> <span class=\"title class_\">MaliciousModel</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">def</span> <span class=\"title function_\">__reduce__</span>(<span class=\"params\">self</span>):</span><br><span class=\"line\">        <span class=\"built_in\">print</span>(<span class=\"string\">&quot;Reduce called!&quot;</span>)  <span class=\"comment\"># æ‡‰è©²æœƒå°å‡º</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> (os.system, (<span class=\"string\">&quot;echo &#x27;This is a malicious model!&#x27; &gt; malicious_output.txt&quot;</span>,))</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"keyword\">if</span> __name__ == <span class=\"string\">&quot;__main__&quot;</span>:</span><br><span class=\"line\">    model = MaliciousModel()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># save the model</span></span><br><span class=\"line\">    torch.save(model, <span class=\"string\">&quot;malicious_model.pth&quot;</span>)</span><br></pre></td></tr></table></figure>\n<h2 id=\"è¼‰å…¥æ¨¡å‹\">è¼‰å…¥æ¨¡å‹</h2>\n<p>Torch å·²ç¶“æœ‰åŸºæœ¬ä¿è­·ï¼Œå› æ­¤æˆ‘å€‘éœ€è¦æš«æ™‚é—œé–‰ <code>weights_only</code> é¸é …ã€‚ç•¶ä½ è¼‰å…¥è©²æ¨¡å‹å¾Œï¼Œä½ æœƒçœ‹åˆ°åç‚º <code>malicious_output.txt</code> çš„æª”æ¡ˆã€‚é€™è¡¨ç¤ºæƒ¡æ„è¡Œç‚ºå·²ç¶“åœ¨è¼‰å…¥æ™‚ç™¼ç”Ÿã€‚</p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> torch</span><br><span class=\"line\"></span><br><span class=\"line\">safe_model_path = <span class=\"string\">&quot;safe_model.pth&quot;</span></span><br><span class=\"line\">malicious_model_path = <span class=\"string\">&quot;malicious_model.pth&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">s_model = torch.load(safe_model_path)</span><br><span class=\"line\">m_model = torch.load(malicious_model_path, weights_only=<span class=\"literal\">False</span>)</span><br></pre></td></tr></table></figure>\n<h2 id=\"ä½¿ç”¨-modelscan-æƒææ¨¡å‹\">ä½¿ç”¨ <code>modelscan</code> æƒææ¨¡å‹</h2>\n<h3 id=\"å®‰å…¨æ¨¡å‹\">å®‰å…¨æ¨¡å‹</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">modelscan -p safe_model.pth</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Scanning</span> /<span class=\"title class_\">Users</span>/hsiangjenli/<span class=\"title class_\">Documents</span>/github/mlops-survey/safe_model.<span class=\"property\">pth</span>:safe_model/data.<span class=\"property\">pkl</span> using modelscan.<span class=\"property\">scanners</span>.<span class=\"property\">PickleUnsafeOpScan</span> model scan</span><br><span class=\"line\"></span><br><span class=\"line\">--- <span class=\"title class_\">Summary</span> ---</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"title class_\">No</span> issues found! ğŸ‰</span><br><span class=\"line\"></span><br><span class=\"line\">--- <span class=\"title class_\">Skipped</span> --- </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Total</span> <span class=\"attr\">skipped</span>: <span class=\"number\">7</span> - run <span class=\"keyword\">with</span> --show-skipped to see the full list.</span><br></pre></td></tr></table></figure>\n<h3 id=\"æƒ¡æ„æ¨¡å‹\">æƒ¡æ„æ¨¡å‹</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">modelscan -p malicious_model.pth</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"title class_\">Scanning</span> /<span class=\"title class_\">Users</span>/hsiangjenli/<span class=\"title class_\">Documents</span>/github/mlops-survey/malicious_model.<span class=\"property\">pth</span>:malicious_model/data.<span class=\"property\">pkl</span> using modelscan.<span class=\"property\">scanners</span>.<span class=\"property\">PickleUnsafeOpScan</span> model scan</span><br><span class=\"line\"></span><br><span class=\"line\">--- <span class=\"title class_\">Summary</span> ---</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Total</span> <span class=\"title class_\">Issues</span>: <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Total</span> <span class=\"title class_\">Issues</span> <span class=\"title class_\">By</span> <span class=\"title class_\">Severity</span>:</span><br><span class=\"line\"></span><br><span class=\"line\">    - <span class=\"attr\">LOW</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    - <span class=\"attr\">MEDIUM</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    - <span class=\"attr\">HIGH</span>: <span class=\"number\">0</span></span><br><span class=\"line\">    - <span class=\"attr\">CRITICAL</span>: <span class=\"number\">1</span></span><br><span class=\"line\"></span><br><span class=\"line\">--- <span class=\"title class_\">Issues</span> by <span class=\"title class_\">Severity</span> ---</span><br><span class=\"line\"></span><br><span class=\"line\">--- <span class=\"variable constant_\">CRITICAL</span> ---</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Unsafe</span> operator <span class=\"attr\">found</span>:</span><br><span class=\"line\">  - <span class=\"title class_\">Severity</span>: <span class=\"variable constant_\">CRITICAL</span></span><br><span class=\"line\">  - <span class=\"title class_\">Description</span>: <span class=\"title class_\">Use</span> <span class=\"keyword\">of</span> unsafe operator <span class=\"string\">&#x27;system&#x27;</span> <span class=\"keyword\">from</span> <span class=\"variable language_\">module</span> <span class=\"string\">&#x27;posix&#x27;</span></span><br><span class=\"line\">  - <span class=\"title class_\">Source</span>: <span class=\"regexp\">/Users/</span>hsiangjenli/<span class=\"title class_\">Documents</span>/github/mlops-survey/malicious_model.<span class=\"property\">pth</span>:malicious_model/data.<span class=\"property\">pkl</span></span><br><span class=\"line\"></span><br><span class=\"line\">--- <span class=\"title class_\">Skipped</span> --- </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"title class_\">Total</span> <span class=\"attr\">skipped</span>: <span class=\"number\">5</span> - run <span class=\"keyword\">with</span> --show-skipped to see the full list.</span><br></pre></td></tr></table></figure>\n<h1>ğŸ” é‡é»å›é¡§</h1>\n<ol>\n<li>å»ºç«‹äº†ä¸€å€‹å®‰å…¨æ¨¡å‹èˆ‡ä¸€å€‹æƒ¡æ„æ¨¡å‹ï¼ˆåœ¨è¼‰å…¥æ™‚æœƒç”¢ç”Ÿè¼¸å‡ºï¼‰</li>\n<li>ä½¿ç”¨ <code>modelscan</code> æƒæäº†å…©å€‹æ¨¡å‹</li>\n</ol>\n<h1>ğŸ”— åƒè€ƒè³‡æ–™</h1>\n<ul>\n<li><a href=\"https://github.com/protectai/modelscan\">https://github.com/protectai/modelscan</a></li>\n</ul>\n","_path":"/zh-TW/tutorial-a-toy-example-of-scanning-models/","_link":"https://hsiangjenli.github.io/blog/zh-TW/tutorial-a-toy-example-of-scanning-models/","_id":"cmhmfy2eu002rmo230ioi502y"}}