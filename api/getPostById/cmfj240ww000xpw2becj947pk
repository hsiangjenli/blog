{"type":"getPostById","data":{"title":"[æ•™å­¸] ä½¿ç”¨ AWS SAM å»ºç«‹èˆ‡åŸ·è¡Œ Lambda å‡½æ•¸","date":"2025-06-19T16:00:00.000Z","description":"<h1>ğŸ“Œ ä»‹ç´¹</h1>\n<p>æœ¬æŒ‡å—ä»‹ç´¹å¦‚ä½•ä½¿ç”¨ AWS SAM å»ºç«‹èˆ‡åŸ·è¡Œ Lambda å‡½æ•¸ï¼ŒåŒ…å«åŸºæœ¬å®‰è£ã€å°ˆæ¡ˆçµæ§‹èªªæ˜ï¼Œä»¥åŠåœ¨æœ¬æ©ŸåŸ·è¡Œ Lambda çš„æµç¨‹ã€‚</p>","categories":[],"tags":[{"name":"aws","_id":"cmfj240x50026pw2b87t6glre"},{"name":"lambda","_id":"cmfj240x60028pw2b9qqyc5c5"}],"content":"<h1>ğŸ“Œ ä»‹ç´¹</h1>\n<p>æœ¬æŒ‡å—ä»‹ç´¹å¦‚ä½•ä½¿ç”¨ AWS SAM å»ºç«‹èˆ‡åŸ·è¡Œ Lambda å‡½æ•¸ï¼ŒåŒ…å«åŸºæœ¬å®‰è£ã€å°ˆæ¡ˆçµæ§‹èªªæ˜ï¼Œä»¥åŠåœ¨æœ¬æ©ŸåŸ·è¡Œ Lambda çš„æµç¨‹ã€‚</p>\n<span id=\"more\"></span>\n<h1>ğŸš€ å¿«é€Ÿé–‹å§‹</h1>\n<h2 id=\"AWS-CLI\">AWS CLI</h2>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install awscli</span><br></pre></td></tr></table></figure>\n<h2 id=\"AWS-SAMï¼ˆServerless-Application-Modelï¼‰CLI\">AWS SAMï¼ˆServerless Application Modelï¼‰CLI</h2>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">brew install aws-sam-cli</span><br></pre></td></tr></table></figure>\n<h3 id=\"åˆå§‹åŒ–-SAM-å°ˆæ¡ˆ\">åˆå§‹åŒ– SAM å°ˆæ¡ˆ</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sam init</span><br></pre></td></tr></table></figure>\n<h3 id=\"å°ˆæ¡ˆçµæ§‹ç¸½è¦½\">å°ˆæ¡ˆçµæ§‹ç¸½è¦½</h3>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.</span><br><span class=\"line\">â”œâ”€â”€ __init__.py</span><br><span class=\"line\">â”œâ”€â”€ events</span><br><span class=\"line\">â”‚   â””â”€â”€ event.json</span><br><span class=\"line\">â”œâ”€â”€ hello_world</span><br><span class=\"line\">â”‚   â”œâ”€â”€ __init__.py</span><br><span class=\"line\">â”‚   â”œâ”€â”€ app.py</span><br><span class=\"line\">â”‚   â””â”€â”€ requirements.txt</span><br><span class=\"line\">â”œâ”€â”€ README.md</span><br><span class=\"line\">â”œâ”€â”€ samconfig.toml</span><br><span class=\"line\">â”œâ”€â”€ template.yaml</span><br><span class=\"line\">â””â”€â”€ tests</span><br><span class=\"line\">    â”œâ”€â”€ __init__.py</span><br><span class=\"line\">    â”œâ”€â”€ integration</span><br><span class=\"line\">    â”‚   â”œâ”€â”€ __init__.py</span><br><span class=\"line\">    â”‚   â””â”€â”€ test_api_gateway.py</span><br><span class=\"line\">    â”œâ”€â”€ requirements.txt</span><br><span class=\"line\">    â””â”€â”€ unit</span><br><span class=\"line\">        â”œâ”€â”€ __init__.py</span><br><span class=\"line\">        â””â”€â”€ test_handler.py</span><br></pre></td></tr></table></figure>\n<ul>\n<li><code>events/</code> - åŒ…å«ç”¨ä¾†æ¸¬è©¦ Lambda å‡½æ•¸çš„æ¨¡æ“¬äº‹ä»¶æœ‰æ•ˆè¼‰è· JSON æª”æ¡ˆ</li>\n<li><code>hello_world/</code> - æ‡‰ç”¨ç¨‹å¼æ‰€åœ¨ï¼›Lambda ç›¸é—œå‡½æ•¸ï¼ˆä¾‹å¦‚ handlerï¼Œä¾‹å¦‚ <a href=\"http://app.py\">app.py</a>ï¼‰èˆ‡ç›¸ä¾å¥—ä»¶ï¼ˆä¾‹å¦‚ requirements.txtï¼‰</li>\n<li><code>tests/</code> - å–®å…ƒæ¸¬è©¦è³‡æ–™å¤¾</li>\n<li><code>samconfig.toml</code> - å„²å­˜ SAM CLI åŸ·è¡Œåƒæ•¸ï¼ˆä¾‹å¦‚éƒ¨ç½²å€åŸŸã€stack åç¨±ã€S3 æ¡¶ç­‰ï¼‰ï¼Œä»¥ä¾¿åœ¨åŸ·è¡Œ <code>sam deploy</code> æ™‚ç°¡åŒ–è¨­å®š</li>\n<li><code>template.yaml</code> - å®šç¾©æ‰€æœ‰ Lambda å‡½æ•¸ï¼›ä¸»è¦çš„åŸºç¤è¨­æ–½å³ç¨‹å¼ç¢¼ï¼ˆIaCï¼‰æª”æ¡ˆï¼ˆå“ªäº›æœå‹™è¢«ä½¿ç”¨ä»¥åŠå®ƒå€‘çš„ç›¸ä¾æ€§ï¼‰ã€‚å®ƒæ˜¯ AWS CloudFormation èªæ³•çš„æ“´å……ã€‚</li>\n</ul>\n<h4 id=\"template-yaml\"><code>template.yaml</code></h4>\n<blockquote>\n<p>æ‚¨å¯ä»¥ä½¿ç”¨ CloudFormation Linter å·¥å…· <a href=\"https://github.com/aws-cloudformation/cfn-lint\"><code>cfn-lint</code></a> ä¾†åµæ¸¬æª”æ¡ˆä¸­çš„æ ¼å¼èˆ‡å±¬æ€§éŒ¯èª¤</p>\n</blockquote>\n<p><strong>æ¨™é ­</strong></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">AWSTemplateFormatVersion:</span> <span class=\"string\">&#x27;2010-09-09&#x27;</span></span><br><span class=\"line\"><span class=\"attr\">Transform:</span> <span class=\"string\">AWS::Serverless-2016-10-31</span></span><br><span class=\"line\"><span class=\"attr\">Description:</span> <span class=\"string\">&gt;</span></span><br><span class=\"line\">  <span class=\"string\">TODO....</span></span><br></pre></td></tr></table></figure>\n<ol>\n<li><strong>AWSTemplateFormatVersion</strong> - AWS CloudFormation çš„ç‰ˆæœ¬</li>\n<li><strong>Transform</strong> - æŒ‡ç¤º CloudFormation ä½¿ç”¨ SAM æ“´å……æ¨¡æ¿èªæ³•</li>\n<li><strong>Description</strong> - å°ˆæ¡ˆæè¿°</li>\n</ol>\n<p><strong>å…§å®¹</strong></p>\n<ol>\n<li><strong>Globals</strong> - æä¾›çµ¦è³‡æºçš„é è¨­è¨­å®š</li>\n<li><strong>Resources</strong> - è¦å»ºç«‹çš„ AWS è³‡æºã€‚è«‹åƒé–± <a href=\"https://docs.aws.amazon.com/AWSCloudFormation/latest/TemplateReference/aws-template-resource-type-ref.html\">AWS resource and property types reference</a> èˆ‡ <a href=\"https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-specification-resources-and-properties.html\">AWS SAM resources and properties</a></li>\n<li><strong>Outputs</strong> - éƒ¨ç½²å¾Œçš„é æœŸè¼¸å‡ºï¼ˆæ‚¨éœ€è¦çš„è³‡è¨Šï¼‰</li>\n</ol>\n<h4 id=\"samconfig-toml\"><code>samconfig.toml</code></h4>\n<blockquote>\n<p>åƒè¦‹ <a href=\"https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-config.html\">AWS SAM CLI configuration file</a>ã€<a href=\"https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/using-sam-cli-configure.html\">Configuring the AWS SAM CLI</a>ã€<a href=\"https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/serverless-sam-cli-command-reference.html\">AWS SAM CLI command reference</a></p>\n</blockquote>\n<p>ç›®çš„åœ¨æ–¼ç°¡åŒ–ä½¿ç”¨ sam æŒ‡ä»¤æ™‚çš„è¤‡é›œåº¦</p>\n<table>\n<thead>\n<tr>\n<th>åŸæœ¬</th>\n<th>ä½¿ç”¨ <code>samconfig</code> å¾Œ</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>sam build --cached --parallel --use-containers</code></td>\n<td><code>sam build</code></td>\n</tr>\n<tr>\n<td><code>sam local invoke --env-vars locals.json</code></td>\n<td><code>sam local invoke</code></td>\n</tr>\n<tr>\n<td><code>sam local start-api --env-vars locals.json --warm-containers EAGER</code></td>\n<td><code>sam local start-api</code></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"æœ¬æ©Ÿå‘¼å«\">æœ¬æ©Ÿå‘¼å«</h3>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sam local invoke</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">No current session found, using default AWS::AccountId                                                       </span><br><span class=\"line\">Invoking app.lambda_handler (python3.13)                                                                    </span><br><span class=\"line\">Local image is up-to-date                                                                                  </span><br><span class=\"line\">Using local image: public.ecr.aws/lambda/python:3.13-rapid-x86_64.                                           </span><br><span class=\"line\">                                                                                                           </span><br><span class=\"line\">Mounting /Users/XXXXXX/Documents/TEST/hello_world as </span><br><span class=\"line\">/var/task:ro,delegated, inside runtime container                                                            </span><br><span class=\"line\">START RequestId: f6a6ec50-58b2-432c-9381-ec45ca43b130 Version: $LATEST</span><br><span class=\"line\">END RequestId: e883464b-1216-43ae-b0fe-f7f803a73057</span><br><span class=\"line\">REPORT RequestId: e883464b-1216-43ae-b0fe-f7f803a73057  Init Duration: 1.26 ms  Duration: 381.91 ms     Billed Duration: 382 ms     Memory Size: 128 MB     Max Memory Used: 128 MB</span><br><span class=\"line\">&#123;&quot;statusCode&quot;: 200, &quot;body&quot;: &quot;&#123;\\&quot;message\\&quot;: \\&quot;hello world\\&quot;&#125;&quot;&#125;</span><br></pre></td></tr></table></figure>\n<h1>ğŸ” é‡é»å›é¡§</h1>\n<ul>\n<li>å®‰è£æŒ‡ä»¤</li>\n<li>äº†è§£ AWS SAM å°ˆæ¡ˆçµæ§‹</li>\n<li>äº†è§£ <code>template.yaml</code> èˆ‡ <code>samconfig.toml</code> é€™äº›æª”æ¡ˆçš„ç”¨é€”åŠå…¶ç›¸é—œå®˜æ–¹æ–‡ä»¶</li>\n<li>åœ¨æœ¬æ©Ÿå‘¼å«ä¸€å€‹ç°¡å–®çš„ã€ŒHello Worldã€Lambda å‡½æ•¸</li>\n</ul>\n<h1>ğŸ”— åƒè€ƒè³‡æ–™</h1>\n<ul>\n<li><a href=\"https://ithelp.ithome.com.tw/articles/10214954\">Day02-ç’°å¢ƒæº–å‚™(ä¸€)å®‰è£AWS CLIã€Dockerã€AWS SAM CLI</a></li>\n</ul>\n","_path":"tutorial_chinese_aws_sam_install_and_lambda/","_link":"https://hsiangjenli.github.io/blog/tutorial_chinese_aws_sam_install_and_lambda/","_id":"cmfj240ww000xpw2becj947pk"}}